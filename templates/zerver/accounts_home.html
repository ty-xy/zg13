{% extends "zerver/portico_signup.html" %}
{# Home page for not logged-in users. #}

{# This is where we pitch the app and solicit signups. #}

{% block portico_content %}
<script type="text/javascript">
$(function () {
    common.autofocus('#email');
});
</script>

<div class="app register-page split-view flex full-page new-style">
    <div class="inline-block">
        <!-- <div class="lead">
            <h1 class="get-started" style="color:#fff">{{ _("e建联注册") }}</h1>
        </div> -->
        <div class="app-main register-page-container white-box {% if realm_invite_required and not from_multiuse_invite %}closed-realm{% endif %}">
            <div class="register-form new-style">
                <!-- {% if realm_name %}
                <div class="left-side">
                    <div class="org-header">
                        <img class="avatar" src="{{ realm_icon }}" alt="" />
                        <div class="info-box">
                            <div class="organization-name">{{ realm_name }}</div>
                            <div class="organization-path">{{ realm_uri }}</div>
                        </div>
                    </div>
                    <div class="description">
                        {{ realm_description|safe }}
                    </div>

                    <div class="invite-required">
                        <hr />
                        <i class="fa fa-lock"></i>{{ _("您需要被邀请才能加入.") }}
                    </div>
                </div>
                {% endif %} -->

                <div class="right-side">
                    <!-- {% if no_auth_enabled %}
                        <div class="alert">
                            <p>No authentication backends are enabled on this
                            server yet, so it is impossible to register!</p>

                            <p>
                                See
                                the <a href="https://zulip.readthedocs.io/en/latest/production/install.html#step-3-configure-zulip">Zulip
                                authentication documentation</a> to learn how to
                                configure authentication backends.
                            </p>
                        </div>
                    {% else %} -->
                        {% if password_auth_enabled %}
                            <form class="form-inline" id="send_confirm" name="email_form"
                              action="/register/" method="post">
                                {{ csrf_input }}

                                <div class="input-box no-validate">
                                    <div class="registered_title">注册</div>
                                    <div class="phone_number_box">
                                        <span class="area_code">+86</span>
                                        <input class="phone_number mobile required" name="phone" placeholder="请输入手机号" maxlength="11" required/>
                                        <div class="alert alert-error email-frontend-error"></div>
                                        {% if form.email.errors %}
                                            {% for error in form.email.errors %}
                                            <div class="email-backend-error alert alert-error">{{ error }}</div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                    <div class="full_name_box">
                                        <input id="full_name" class="full_name required" name="fullname" placeholder="请输入昵称" type="text" required/>
                                    </div>
                                    <div class="verification_box">
                                        <input class="verification" name="smscode" autocomplete="off" placeholder="请输入验证码" required/>
                                        <input type="button" class="get_verification" value="获取验证码"/>
                                    </div>
                                    <div class="registered_password_box">
                                        <input type="password" maxlength="20" name="password" id="registered_password" autocomplete="off" class="registered_password" placeholder="请设置密码" required/>
                                        <i class="iconfont icon-yanjingguan eyeclose r_eyeicon"></i>
                                    </div>

                                    <!-- <input type="email" id="email" class="email" name="email" value="" required /> -->
                                    <!-- <label for="email">Email</label> -->
                                </div>
                                <a href="/login/" class="login_style">登录</a>
                                <button class="full-width" type="submit" name="">提交</button>
                            </form>

                            <!-- {% if any_oauth_backend_enabled %}
                            <div class="or"><span>{{ _('OR') }}</span></div>
                            {% endif %} -->
                        {% endif %}

                        <!-- {% if google_auth_enabled %}
                        <div class="register-google">
                            <form class="form-inline" action="{{ url('zerver.views.auth.start_google_oauth2') }}" method="get">
                                <input type='hidden' name='is_signup' value='1' />
                                <button class="login-social-button login-google-button full-width">{{ _('Sign up with Google') }}</button>
                            </form>
                        </div>
                        {% endif %}

                        {% if github_auth_enabled %}
                        <div class="login-github">
                            <form class="form-inline github-wrapper" action="{{ url('signup-social', args=('github',)) }}" method="get">
                                <button class="login-social-button login-github-button github">{{ _('Sign up with GitHub') }}</button>
                            </form>
                        </div>
                        {% endif %} -->
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
if (window.location.hash.substring(0, 1) === "#") {
    document.email_form.action += window.location.hash;
}
</script>
{% endblock %}
